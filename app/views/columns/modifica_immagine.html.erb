<%= render 'form_immagine' %>

<script>

  // salviamo i contenuti della pagina
  pageSave();

  $( "form" ).submit( function(e) {
    $.ajax( {
      url: $(this).attr("action"),
      type: 'POST',
      data: new FormData( this ),
      processData: false,
      contentType: false,
      success: function(data) {
        // chiudiamo la finestra modale
        $("#finestra_modale").foundation('close');

        // sostituiamo la riga modificata
        $('#row<%= @row_id %>').replaceWith( data).foundation();

        $('#row<%= @row_id %> .mioslider').slick({
          slidestoshow: 1,
          slidestoscroll: 1,
          autoplay: true,
          autoplayspeed: 2000,
          zIndex: 100,
          arrows: true
        });

        hideElements();
      }
    } );
    e.preventDefault();
  } );

</script>